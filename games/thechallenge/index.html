<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Challenge</title>
    <link rel="icon" type="image/png" href="/fav/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/fav/favicon.svg" />
<link rel="shortcut icon" href="/fav/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/fav/apple-touch-icon.png" />
<link rel="manifest" href="/fav/site.webmanifest" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            width: 90%;
            max-width: 800px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .content {
            padding: 30px;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        /* Login Screen */
        .login-form, .register-form {
            max-width: 400px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #4facfe;
        }

        .btn {
            background: linear-gradient(45deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: transform 0.2s;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
        }

        .error-msg {
            color: #e74c3c;
            margin-top: 10px;
            padding: 10px;
            background: #ffe6e6;
            border-radius: 5px;
            display: none;
        }

        /* Game Screen */
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .game-stats {
            display: flex;
            gap: 30px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #4facfe;
        }

        .stat-label {
            font-size: 0.9em;
            color: #666;
        }

        .timer {
            font-size: 2em;
            font-weight: bold;
            color: #e74c3c;
        }

        .question-box {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border-left: 5px solid #4facfe;
        }

        .question-number {
            color: #4facfe;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.1em;
            line-height: 1.6;
            color: #333;
            margin-bottom: 20px;
        }

        .answer-input {
            width: 150px;
            padding: 15px;
            font-size: 1.2em;
            text-align: center;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin-right: 15px;
        }

        .submit-btn {
            padding: 15px 30px;
            font-size: 1.1em;
        }

        .result-box {
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
            font-weight: bold;
        }

        .result-correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .result-wrong {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f1b0b7;
        }

        /* Developer Mode */
        .dev-panel {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .dev-controls {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 15px;
        }

        .dev-controls input {
            width: 80px;
            padding: 5px;
            text-align: center;
        }

        /* Results Screen */
        .results-summary {
            text-align: center;
            margin-bottom: 30px;
        }

        .final-score {
            font-size: 3em;
            color: #4facfe;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .explanation-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .explanation-question {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .explanation-answer {
            color: #666;
            line-height: 1.6;
        }

        .hearts {
            display: flex;
            gap: 10px;
        }

        .heart {
            color: #e74c3c;
            font-size: 1.5em;
        }

        .heart.lost {
            color: #ccc;
        }

        @media (max-width: 768px) {
            .container {
                width: 95%;
                margin: 10px;
            }
            
            .game-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .game-stats {
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>The Challenge</h1>
            <p>ì¡°í•©ë¡  ë§ˆìŠ¤í„°ì— ë„ì „í•˜ì„¸ìš”!</p>
        </div>

        <div class="content">
            <!-- Login Screen -->
            <div id="loginScreen" class="screen active">
                <div class="login-form">
                    <h2 style="text-align: center; margin-bottom: 30px;">ë¡œê·¸ì¸</h2>
                    <div class="form-group">
                        <label for="loginId">ì•„ì´ë””</label>
                        <input type="text" id="loginId" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">ë¹„ë°€ë²ˆí˜¸</label>
                        <input type="password" id="loginPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <div style="text-align: center;">
                        <button class="btn" onclick="login()">ë¡œê·¸ì¸</button>
                        <button class="btn btn-secondary" onclick="showRegister()">íšŒì›ê°€ì…</button>
                    </div>
                    <div id="loginError" class="error-msg"></div>
                </div>
            </div>

            <!-- Register Screen -->
            <div id="registerScreen" class="screen">
                <div class="register-form">
                    <h2 style="text-align: center; margin-bottom: 30px;">íšŒì›ê°€ì…</h2>
                    <div class="form-group">
                        <label for="regId">ì•„ì´ë””</label>
                        <input type="text" id="regId" placeholder="ì•„ì´ë”” (ìœ ë‹ˆì½”ë“œ ë¬¸ì í—ˆìš©)">
                    </div>
                    <div class="form-group">
                        <label for="regPassword">ë¹„ë°€ë²ˆí˜¸</label>
                        <input type="password" id="regPassword" placeholder="8ì ì´ìƒ, ëŒ€ì†Œë¬¸ì/ìˆ«ì/íŠ¹ìˆ˜ë¬¸ì ì¤‘ 3ì¢… ì´ìƒ">
                    </div>
                    <div class="form-group">
                        <label for="regPasswordConfirm">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                        <input type="password" id="regPasswordConfirm" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <div style="text-align: center;">
                        <button class="btn" onclick="register()">ê°€ì…í•˜ê¸°</button>
                        <button class="btn btn-secondary" onclick="showLogin()">ë¡œê·¸ì¸ìœ¼ë¡œ</button>
                    </div>
                    <div id="regError" class="error-msg"></div>
                </div>
            </div>

            <!-- Game Screen -->
            <div id="gameScreen" class="screen">
                <div class="game-header">
                    <div class="game-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="currentScore">0</div>
                            <div class="stat-label">ì ìˆ˜</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="questionNum">1</div>
                            <div class="stat-label">ë¬¸ì œ</div>
                        </div>
                        <div class="stat-item">
                            <div class="hearts" id="hearts">
                                <span class="heart">â™¥</span>
                                <span class="heart">â™¥</span>
                                <span class="heart">â™¥</span>
                            </div>
                            <div class="stat-label">ìƒëª…</div>
                        </div>
                    </div>
                    <div class="timer" id="timer">10:00</div>
                </div>

                <!-- Developer Panel -->
                <div id="devPanel" class="dev-panel" style="display: none;">
                    <h3>ğŸ› ï¸ ê°œë°œì ëª¨ë“œ</h3>
                    <div class="dev-controls">
                        <label>í˜„ì¬ ë¬¸ì œ ì ìˆ˜:</label>
                        <input type="number" id="scoreInput" min="1" max="100" value="10">
                        <button class="btn" onclick="updateScore()">ì ìˆ˜ ë³€ê²½</button>
                        <button class="btn btn-secondary" onclick="skipQuestion()">ë¬¸ì œ ê±´ë„ˆë›°ê¸°</button>
                    </div>
                </div>

                <div class="question-box">
                    <div class="question-number" id="questionCategory">ê¸°ë³¸ ìˆœì—´/ì¡°í•©</div>
                    <div class="question-text" id="questionText">ë¬¸ì œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                    <div style="text-align: center; margin-top: 20px;">
                        <input type="number" id="answerInput" class="answer-input" placeholder="ë‹µ (0-999)" min="0" max="999">
                        <button class="btn submit-btn" onclick="submitAnswer()">ì œì¶œ</button>
                    </div>
                </div>

                <div id="resultBox" class="result-box" style="display: none;"></div>
            </div>

            <!-- Results Screen -->
            <div id="resultsScreen" class="screen">
                <div class="results-summary">
                    <div class="final-score" id="finalScore">0</div>
                    <h2>ê²Œì„ ì¢…ë£Œ!</h2>
                    <p id="gameResult">ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤!</p>
                </div>

                <div id="explanations">
                    <!-- í•´ì„¤ë“¤ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn" onclick="startNewGame()">ë‹¤ì‹œ ë„ì „</button>
                    <button class="btn btn-secondary" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ê²Œì„ ìƒíƒœ
        let currentUser = null;
        let gameState = {
            currentQuestion: 0,
            score: 0,
            wrongAnswers: 0,
            timeLeft: 600, // 10ë¶„ = 600ì´ˆ
            timer: null,
            questions: [],
            answers: [],
            isDevMode: false
        };

        const questionBank = [
{
    category: "í¬í•¨ë°°ì œ ì›ë¦¬",
    question: "1ë¶€í„° 94ê¹Œì§€ì˜ ìì—°ìˆ˜ ì¤‘ 7, 6, 3 ì¤‘ ì ì–´ë„ í•˜ë‚˜ë¡œ ë‚˜ëˆ„ì–´ì§€ëŠ” ìˆ˜ì˜ ê°œìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 48,
    score: 10,
    explanation: "í¬í•¨ë°°ì œ: 13+15+31-2-4-5+0 = 48"
},
{
    category: "ë¶„í• ê³¼ ë¶„ë°°",
    question: "6ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ê³µì„ 3ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ìƒìì— ë¹ˆ ìƒì ì—†ì´ ë‚˜ëˆ„ëŠ” ë°©ë²•ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 540,
    score: 12,
    explanation: "S(6,3)Ã—3! = 90Ã—6 = 540"
},
{
    category: "ì í™”ì‹ & ì¹´íƒˆë€ ìˆ˜",
    question: "2ìŒì˜ ê´„í˜¸ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì˜¬ë°”ë¥¸ ê´„í˜¸ ë¬¸ìì—´ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 2,
    score: 10,
    explanation: "Catalan(2) = 2"
},
{
    category: "ğŸ”¥ íŠ¹ë³„ ë¬¸ì œ",
    question: "ì •ì˜ì—­ {1,...,1999}, ê³µì—­ {2000,...,2003}ì¸ í•¨ìˆ˜ fì—ì„œ f(1)+...+f(1999)ê°€ ì§ìˆ˜ì¸ í•¨ìˆ˜ ê°œìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 128,
    score: 50,
    explanation: "ì „ì²´ ê²½ìš°ì˜ ìˆ˜: 4^1999 â†’ ì§ìˆ˜ ì¡°ê±´: ì ˆë°˜ = 4^1998 = 128 mod 1000"
},
          {
    category: "íŠ¹ìˆ˜ ìˆœì—´",
    question: "3ê°œì˜ ì›ì†Œë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì™„ì „ êµë€ ìˆœì—´ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 2,
    score: 10,
    explanation: "D(3) = 2"
},
{
    category: "ê³„ì‚° ì§‘ì•½ì ",
    question: "3ê°œì˜ ë¹¨ê°„ ê³µ, 2ê°œì˜ íŒŒë€ ê³µ, 1ê°œì˜ ì´ˆë¡ ê³µì„ ì¼ë ¬ë¡œ ë‚˜ì—´í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 60,
    score: 12,
    explanation: "6! / (3!Ã—2!Ã—1!) = 720 / 12 = 60"
},
{
    category: "í¬í•¨ë°°ì œ ì›ë¦¬",
    question: "1ë¶€í„° 80ê¹Œì§€ ìì—°ìˆ˜ ì¤‘ 4 ë˜ëŠ” 5ì˜ ë°°ìˆ˜ì¸ ìˆ˜ì˜ ê°œìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 36,
    score: 10,
    explanation: "20 + 16 - 4 = 32"
},
{
    category: "ë¶„í• ê³¼ ë¶„ë°°",
    question: "7ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ê³µì„ 3ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ìƒìì— ë¹ˆ ìƒì ì—†ì´ ë‚˜ëˆ„ëŠ” ë°©ë²•ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 864,
    score: 12,
    explanation: "S(7,3)Ã—3! = 144Ã—6 = 864"
},
{
    category: "ì í™”ì‹ & ì¹´íƒˆë€ ìˆ˜",
    question: "3ìŒì˜ ê´„í˜¸ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì˜¬ë°”ë¥¸ ê´„í˜¸ ë¬¸ìì—´ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 5,
    score: 10,
    explanation: "Catalan(3) = 5"
},
{
    category: "íŠ¹ìˆ˜ ìˆœì—´",
    question: "4ê°œì˜ ì›ì†Œë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì™„ì „ êµë€ ìˆœì—´ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 9,
    score: 10,
    explanation: "D(4) = 9"
},
{
    category: "ê³„ì‚° ì§‘ì•½ì ",
    question: "2ê°œì˜ ë¹¨ê°„ ê³µ, 2ê°œì˜ íŒŒë€ ê³µ, 1ê°œì˜ ì´ˆë¡ ê³µì„ ì¼ë ¬ë¡œ ë‚˜ì—´í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 30,
    score: 12,
    explanation: "5! / (2!Ã—2!Ã—1!) = 120 / 4 = 30"
},
{
    category: "í¬í•¨ë°°ì œ ì›ë¦¬",
    question: "1ë¶€í„° 90ê¹Œì§€ ìì—°ìˆ˜ ì¤‘ 3 ë˜ëŠ” 5ì˜ ë°°ìˆ˜ì¸ ìˆ˜ì˜ ê°œìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 48,
    score: 10,
    explanation: "30 + 18 - 6 = 42"
},
{
    category: "ë¶„í• ê³¼ ë¶„ë°°",
    question: "6ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ê³µì„ 2ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ìƒìì— ë¹ˆ ìƒì ì—†ì´ ë‚˜ëˆ„ëŠ” ë°©ë²•ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 62,
    score: 12,
    explanation: "S(6,2)Ã—2! = 31Ã—2 = 62"
},
{
    category: "ì í™”ì‹ & ì¹´íƒˆë€ ìˆ˜",
    question: "5ìŒì˜ ê´„í˜¸ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì˜¬ë°”ë¥¸ ê´„í˜¸ ë¬¸ìì—´ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 42,
    score: 10,
    explanation: "Catalan(5) = 42"
},
{
    category: "íŠ¹ìˆ˜ ìˆœì—´",
    question: "5ê°œì˜ ì›ì†Œë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì™„ì „ êµë€ ìˆœì—´ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 44,
    score: 10,
    explanation: "D(5) = 44"
},
{
    category: "ê³„ì‚° ì§‘ì•½ì ",
    question: "2ê°œì˜ ë¹¨ê°„ ê³µ, 1ê°œì˜ íŒŒë€ ê³µ, 1ê°œì˜ ì´ˆë¡ ê³µì„ ì¼ë ¬ë¡œ ë‚˜ì—´í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 12,
    score: 12,
    explanation: "4! / (2!Ã—1!Ã—1!) = 24 / 2 = 12"
},
{
    category: "í¬í•¨ë°°ì œ ì›ë¦¬",
    question: "1ë¶€í„° 100ê¹Œì§€ ìì—°ìˆ˜ ì¤‘ 2 ë˜ëŠ” 3ì˜ ë°°ìˆ˜ì¸ ìˆ˜ì˜ ê°œìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 67,
    score: 10,
    explanation: "50 + 33 - 16 = 67"
},
{
    category: "ë¶„í• ê³¼ ë¶„ë°°",
    question: "8ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ê³µì„ 3ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ìƒìì— ë¹ˆ ìƒì ì—†ì´ ë‚˜ëˆ„ëŠ” ë°©ë²•ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 0,
    score: 12,
    explanation: "S(8,3)Ã—3! = 966Ã—6 = 5796 â†’ 5796 % 1000 = 796"
},
{
    category: "ì í™”ì‹ & ì¹´íƒˆë€ ìˆ˜",
    question: "6ìŒì˜ ê´„í˜¸ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì˜¬ë°”ë¥¸ ê´„í˜¸ ë¬¸ìì—´ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 132,
    score: 10,
    explanation: "Catalan(6) = 132"
},
{
    category: "íŠ¹ìˆ˜ ìˆœì—´",
    question: "6ê°œì˜ ì›ì†Œë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì™„ì „ êµë€ ìˆœì—´ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 265,
    score: 10,
    explanation: "D(6) = 265"
},
{
    category: "ê³„ì‚° ì§‘ì•½ì ",
    question: "3ê°œì˜ ë¹¨ê°„ ê³µ, 1ê°œì˜ íŒŒë€ ê³µ, 1ê°œì˜ ì´ˆë¡ ê³µì„ ì¼ë ¬ë¡œ ë‚˜ì—´í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 20,
    score: 12,
    explanation: "5! / (3!Ã—1!Ã—1!) = 120 / 6 = 20"
},
{
    category: "í¬í•¨ë°°ì œ ì›ë¦¬",
    question: "1ë¶€í„° 70ê¹Œì§€ ìì—°ìˆ˜ ì¤‘ 5 ë˜ëŠ” 6ì˜ ë°°ìˆ˜ì¸ ìˆ˜ì˜ ê°œìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 24,
    score: 10,
    explanation: "14 + 11 - 2 = 23"
},
{
    category: "ë¶„í• ê³¼ ë¶„ë°°",
    question: "5ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ê³µì„ 3ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ìƒìì— ë¹ˆ ìƒì ì—†ì´ ë‚˜ëˆ„ëŠ” ë°©ë²•ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 150,
    score: 12,
    explanation: "S(5,3)Ã—3! = 25Ã—6 = 150"
},
{
    category: "ì í™”ì‹ & ì¹´íƒˆë€ ìˆ˜",
    question: "7ìŒì˜ ê´„í˜¸ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì˜¬ë°”ë¥¸ ê´„í˜¸ ë¬¸ìì—´ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 429,
    score: 10,
    explanation: "Catalan(7) = 429"
},
{
    category: "ê³„ì‚° ì§‘ì•½ì ",
    question: "5ê°œì˜ ë¹¨ê°„ ê³µ, 1ê°œì˜ íŒŒë€ ê³µ, 2ê°œì˜ ì´ˆë¡ ê³µì„ ì¼ë ¬ë¡œ ë‚˜ì—´í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 120,
    score: 12,
    explanation: "8! / (5!Ã—1!Ã—2!) = 40320 / 120 = 336"
},
{
    category: "í¬í•¨ë°°ì œ ì›ë¦¬",
    question: "1ë¶€í„° 60ê¹Œì§€ ìì—°ìˆ˜ ì¤‘ 3, 6, 9ì˜ ë°°ìˆ˜ì¸ ìˆ˜ì˜ ê°œìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 21,
    score: 10,
    explanation: "20 + 10 - 7 = 23"
},
{
    category: "ë¶„í• ê³¼ ë¶„ë°°",
    question: "7ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ê³µì„ 4ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ìƒìì— ë¹ˆ ìƒì ì—†ì´ ë‚˜ëˆ„ëŠ” ë°©ë²•ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 840,
    score: 12,
    explanation: "S(7,4)Ã—4! = 140Ã—24 = 3360 â†’ 3360 % 1000 = 360"
},{
    category: "ê³„ì‚° ì§‘ì•½ì ",
    question: "3ê°œì˜ ë¹¨ê°„ ê³µ, 3ê°œì˜ íŒŒë€ ê³µì„ ì¼ë ¬ë¡œ ë‚˜ì—´í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 20,
    score: 12,
    explanation: "6! / (3!Ã—3!) = 720 / 36 = 20"
},
{
    category: "í¬í•¨ë°°ì œ ì›ë¦¬",
    question: "1ë¶€í„° 100ê¹Œì§€ ìì—°ìˆ˜ ì¤‘ 4 ë˜ëŠ” 7ì˜ ë°°ìˆ˜ì¸ ìˆ˜ì˜ ê°œìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 39,
    score: 10,
    explanation: "25 + 14 - 7 = 32"
},
{
    category: "ë¶„í• ê³¼ ë¶„ë°°",
    question: "9ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ê³µì„ 4ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ìƒìì— ë¹ˆ ìƒì ì—†ì´ ë‚˜ëˆ„ëŠ” ë°©ë²•ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 480,
    score: 12,
    explanation: "S(9,4)Ã—4! = 3025Ã—24 = 72600 â†’ 72600 % 1000 = 600"
},
{
    category: "ì í™”ì‹ & ì¹´íƒˆë€ ìˆ˜",
    question: "8ìŒì˜ ê´„í˜¸ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì˜¬ë°”ë¥¸ ê´„í˜¸ ë¬¸ìì—´ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 429,
    score: 10,
    explanation: "Catalan(8) = 429"
},
{
    category: "ê³„ì‚° ì§‘ì•½ì ",
    question: "2ê°œì˜ ë¹¨ê°„ ê³µ, 3ê°œì˜ íŒŒë€ ê³µ, 2ê°œì˜ ì´ˆë¡ ê³µì„ ì¼ë ¬ë¡œ ë‚˜ì—´í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 60,
    score: 12,
    explanation: "7! / (2!Ã—3!Ã—2!) = 5040 / 12 = 420"
},
{
    category: "í¬í•¨ë°°ì œ ì›ë¦¬",
    question: "1ë¶€í„° 50ê¹Œì§€ ìì—°ìˆ˜ ì¤‘ 2, 4, 6ì˜ ë°°ìˆ˜ì¸ ìˆ˜ì˜ ê°œìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 25,
    score: 10,
    explanation: "25 + 12 - 7 = 31"
},
{
    category: "ë¶„í• ê³¼ ë¶„ë°°",
    question: "10ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ê³µì„ 5ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ìƒìì— ë¹ˆ ìƒì ì—†ì´ ë‚˜ëˆ„ëŠ” ë°©ë²•ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 370,
    score: 12,
    explanation: "S(10,5)Ã—5! = 425Ã—120 = 51000 â†’ 51000 % 1000 = 0"
},{
    category: "ê¸°í•˜í•™ì  ì¡°í•©ë¡ ",
    question: "í‰ë©´ìƒì˜ 4ê°œì˜ ì§ì„ ì´ ì¼ë°˜ì  ìœ„ì¹˜ì— ìˆì„ ë•Œ í‰ë©´ì„ ë‚˜ëˆ„ëŠ” ì˜ì—­ì˜ ê°œìˆ˜ëŠ”?",
    answer: 11,
    score: 12,
    explanation: "nê°œ ì§ì„ ì´ ì¼ë°˜ì  ìœ„ì¹˜ì— ìˆì„ ë•Œ: 1 + n + C(n,2) = 1 + 4 + 6 = 11"
},
{
    category: "ê¸°í•˜í•™ì  ì¡°í•©ë¡ ",
    question: "í‰ë©´ìƒì˜ 5ê°œì˜ ì§ì„ ì´ ì¼ë°˜ì  ìœ„ì¹˜ì— ìˆì„ ë•Œ í‰ë©´ì„ ë‚˜ëˆ„ëŠ” ì˜ì—­ì˜ ê°œìˆ˜ëŠ”?",
    answer: 16,
    score: 12,
    explanation: "nê°œ ì§ì„ ì´ ì¼ë°˜ì  ìœ„ì¹˜ì— ìˆì„ ë•Œ: 1 + n + C(n,2) = 1 + 5 + 10 = 16"
},
{
    category: "ê¸°í•˜í•™ì  ì¡°í•©ë¡ ",
    question: "í‰ë©´ìƒì˜ 6ê°œì˜ ì§ì„ ì´ ì¼ë°˜ì  ìœ„ì¹˜ì— ìˆì„ ë•Œ í‰ë©´ì„ ë‚˜ëˆ„ëŠ” ì˜ì—­ì˜ ê°œìˆ˜ëŠ”?",
    answer: 22,
    score: 12,
    explanation: "nê°œ ì§ì„ ì´ ì¼ë°˜ì  ìœ„ì¹˜ì— ìˆì„ ë•Œ: 1 + n + C(n,2) = 1 + 6 + 15 = 22"
},
{
    category: "ê¸°í•˜í•™ì  ì¡°í•©ë¡ ",
    question: "ì •ìœ¡ê°í˜•ì˜ ê¼­ì§“ì  6ê°œ ì¤‘ 3ê°œë¥¼ ì„ íƒí•˜ì—¬ ë§Œë“œëŠ” ì‚¼ê°í˜•ì˜ ê°œìˆ˜ëŠ”?",
    answer: 20,
    score: 12,
    explanation: "C(6,3) = 20. ëª¨ë“  3ê°œ ì ì˜ ì¡°í•©ì´ ì‚¼ê°í˜•ì„ ë§Œë“ ë‹¤."
},
{
    category: "ê¸°í•˜í•™ì  ì¡°í•©ë¡ ",
    question: "í‰ë©´ìƒì˜ 7ê°œì˜ ì§ì„ ì´ ì¼ë°˜ì  ìœ„ì¹˜ì— ìˆì„ ë•Œ í‰ë©´ì„ ë‚˜ëˆ„ëŠ” ì˜ì—­ì˜ ê°œìˆ˜ëŠ”?",
    answer: 29,
    score: 12,
    explanation: "nê°œ ì§ì„ ì´ ì¼ë°˜ì  ìœ„ì¹˜ì— ìˆì„ ë•Œ: 1 + n + C(n,2) = 1 + 7 + 21 = 29"
},
{
    category: "ê¸°í•˜í•™ì  ì¡°í•©ë¡ ",
    question: "í‰ë©´ìƒì˜ 8ê°œì˜ ì§ì„ ì´ ì¼ë°˜ì  ìœ„ì¹˜ì— ìˆì„ ë•Œ í‰ë©´ì„ ë‚˜ëˆ„ëŠ” ì˜ì—­ì˜ ê°œìˆ˜ëŠ”?",
    answer: 37,
    score: 12,
    explanation: "nê°œ ì§ì„ ì´ ì¼ë°˜ì  ìœ„ì¹˜ì— ìˆì„ ë•Œ: 1 + n + C(n,2) = 1 + 8 + 28 = 37"
},
{
    category: "ê¸°í•˜í•™ì  ì¡°í•©ë¡ ",
    question: "ì •ì˜¤ê°í˜•ì˜ ê¼­ì§“ì  5ê°œ ì¤‘ 3ê°œë¥¼ ì„ íƒí•˜ì—¬ ë§Œë“œëŠ” ì‚¼ê°í˜•ì˜ ê°œìˆ˜ëŠ”?",
    answer: 10,
    score: 12,
    explanation: "C(5,3) = 10. ëª¨ë“  3ê°œ ì ì˜ ì¡°í•©ì´ ì‚¼ê°í˜•ì„ ë§Œë“ ë‹¤."
},
{
    category: "ê¸°í•˜í•™ì  ì¡°í•©ë¡ ",
    question: "ì •ì‚¬ê°í˜•ì˜ ê¼­ì§“ì  4ê°œ ì¤‘ 3ê°œë¥¼ ì„ íƒí•˜ì—¬ ë§Œë“œëŠ” ì‚¼ê°í˜•ì˜ ê°œìˆ˜ëŠ”?",
    answer: 4,
    score: 12,
    explanation: "C(4,3) = 4. ëª¨ë“  3ê°œ ì ì˜ ì¡°í•©ì´ ì‚¼ê°í˜•ì„ ë§Œë“ ë‹¤."
},
{
    category: "ê¸°í•˜í•™ì  ì¡°í•©ë¡ ",
    question: "í‰ë©´ìƒì˜ 9ê°œì˜ ì§ì„ ì´ ì¼ë°˜ì  ìœ„ì¹˜ì— ìˆì„ ë•Œ í‰ë©´ì„ ë‚˜ëˆ„ëŠ” ì˜ì—­ì˜ ê°œìˆ˜ëŠ”?",
    answer: 46,
    score: 12,
    explanation: "nê°œ ì§ì„ ì´ ì¼ë°˜ì  ìœ„ì¹˜ì— ìˆì„ ë•Œ: 1 + n + C(n,2) = 1 + 9 + 36 = 46"
},
{
    category: "ê¸°í•˜í•™ì  ì¡°í•©ë¡ ",
    question: "ì •êµ¬ì˜ ê¼­ì§“ì  6ê°œ ì¤‘ 3ê°œë¥¼ ì„ íƒí•˜ì—¬ ë§Œë“œëŠ” ì‚¼ê°í˜•ì˜ ê°œìˆ˜ëŠ”?",
    answer: 20,
    score: 12,
    explanation: "C(6,3) = 20. ëª¨ë“  3ê°œ ì ì˜ ì¡°í•©ì´ ì‚¼ê°í˜•ì„ ë§Œë“ ë‹¤."
},
{
    category: "ê¸°í•˜í•™ì  ì¡°í•©ë¡ ",
    question: "í‰ë©´ìƒì˜ 10ê°œì˜ ì§ì„ ì´ ì¼ë°˜ì  ìœ„ì¹˜ì— ìˆì„ ë•Œ í‰ë©´ì„ ë‚˜ëˆ„ëŠ” ì˜ì—­ì˜ ê°œìˆ˜ëŠ”?",
    answer: 56,
    score: 12,
    explanation: "nê°œ ì§ì„ ì´ ì¼ë°˜ì  ìœ„ì¹˜ì— ìˆì„ ë•Œ: 1 + n + C(n,2) = 1 + 10 + 45 = 56"
},
{
    category: "ê¸°í•˜í•™ì  ì¡°í•©ë¡ ",
    question: "ì •ì‚¬ê°í˜•ì˜ ê¼­ì§“ì  5ê°œ ì¤‘ 3ê°œë¥¼ ì„ íƒí•˜ì—¬ ë§Œë“œëŠ” ì‚¼ê°í˜•ì˜ ê°œìˆ˜ëŠ”?",
    answer: 10,
    score: 12,
    explanation: "C(5,3) = 10. ëª¨ë“  3ê°œ ì ì˜ ì¡°í•©ì´ ì‚¼ê°í˜•ì„ ë§Œë“ ë‹¤."
}
,{
    category: "ê¸°ë³¸ ìˆœì—´/ì¡°í•© ì‹¬í™”",
    question: "ì„œë¡œ ë‹¤ë¥¸ 5ê°œì˜ êµ¬ìŠ¬ ì¤‘ 3ê°œë¥¼ ë½‘ì•„ ì¼ë ¬ë¡œ ë‚˜ì—´í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 60,
    score: 8,
    explanation: "5P3 = 5! / (5-3)! = 5Ã—4Ã—3 = 60"
},
{
    category: "ê¸°ë³¸ ìˆœì—´/ì¡°í•© ì‹¬í™”",
    question: "3ê°œì˜ ë¹¨ê°„ ê³µ, 3ê°œì˜ íŒŒë€ ê³µì„ ì¼ë ¬ë¡œ ë‚˜ì—´í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 20,
    score: 10,
    explanation: "6! / (3!Ã—3!) = 720 / 36 = 20"
},
{
    category: "ê¸°ë³¸ ìˆœì—´/ì¡°í•© ì‹¬í™”",
    question: "3ê°œì˜ ë¹¨ê°„ ê³µ, 2ê°œì˜ íŒŒë€ ê³µì„ ì¼ë ¬ë¡œ ë‚˜ì—´í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 30,
    score: 12,
    explanation: "5! / (3!Ã—2!) = 120 / 12 = 10"
},
{
    category: "ê¸°ë³¸ ìˆœì—´/ì¡°í•© ì‹¬í™”",
    question: "6ê°œì˜ ê³µì´ ìˆì„ ë•Œ, ê°ê¸° ë‹¤ë¥¸ 3ê°œì˜ êµ¬ìŠ¬ì„ ë½‘ì•„ ì¤‘ë³µ ì—†ì´ ì¼ë ¬ë¡œ ë‚˜ì—´í•˜ëŠ” ë°©ë²•ì€?",
    answer: 120,
    score: 15,
    explanation: "6P3 = 6! / (6-3)! = 6Ã—5Ã—4 = 120"
},
{
    category: "ê¸°ë³¸ ìˆœì—´/ì¡°í•© ì‹¬í™”",
    question: "1ë¶€í„° 10ê¹Œì§€ì˜ ìˆ«ì ì¤‘ 5ê°œë¥¼ ê³ ë¥¸ í›„ ìˆœì„œë¥¼ ë°”ê¾¸ëŠ” ë°©ë²•ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 120,
    score: 12,
    explanation: "10P5 = 10! / 5! = 30240 / 120 = 252"
},
{
    category: "ê¸°ë³¸ ìˆœì—´/ì¡°í•© ì‹¬í™”",
    question: "4ê°œì˜ ê³µì„ 2ê°œì”© ë‚˜ëˆ„ì–´ì£¼ëŠ” ë°©ë²•ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 6,
    score: 8,
    explanation: "4C2 = 4! / (2!Ã—2!) = 6"
},
{
    category: "ê¸°ë³¸ ìˆœì—´/ì¡°í•© ì‹¬í™”",
    question: "ì„œë¡œ ë‹¤ë¥¸ 7ê°œì˜ ê³µì„ 3ê°œì”© ë‚˜ëˆ„ì–´ì£¼ëŠ” ë°©ë²•ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 35,
    score: 12,
    explanation: "7C3 = 7! / (3!Ã—4!) = 35"
},
{
    category: "ê¸°ë³¸ ìˆœì—´/ì¡°í•© ì‹¬í™”",
    question: "5ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ê³µì„ 3ê°œì˜ ìƒìì— ë¹ˆ ìƒì ì—†ì´ ë‚˜ëˆ„ëŠ” ë°©ë²•ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 60,
    score: 10,
    explanation: "S(5,3)Ã—3! = 25Ã—6 = 150"
},
{
    category: "ê¸°ë³¸ ìˆœì—´/ì¡°í•© ì‹¬í™”",
    question: "3ê°œì˜ ë¹¨ê°„ ê³µ, 3ê°œì˜ íŒŒë€ ê³µ, 2ê°œì˜ ì´ˆë¡ ê³µì„ ì¼ë ¬ë¡œ ë‚˜ì—´í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ 1000ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?",
    answer: 60,
    score: 12,
    explanation: "8! / (3!Ã—3!Ã—2!) = 40320 / 36 = 1120"
},
{
    category: "ê¸°ë³¸ ìˆœì—´/ì¡°í•© ì‹¬í™”",
    question: "1, 1, 2, 2, 3ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì„œë¡œ ë‹¤ë¥¸ 5ìë¦¬ ìˆ˜ì˜ ê°œìˆ˜ëŠ”?",
    answer: 30,
    score: 10,
    explanation: "5! / (2!Ã—2!Ã—1!) = 120 / 4 = 30"
}

];


        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            errorElement.textContent = message;
            errorElement.style.display = 'block';
            setTimeout(() => {
                errorElement.style.display = 'none';
            }, 5000);
        }

        // ê°„ë‹¨í•œ í•´ì‹œ í•¨ìˆ˜
        function simpleHash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // 32bit integerë¡œ ë³€í™˜
            }
            return Math.abs(hash).toString();
        }

        // ë¹„ë°€ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬
        function validatePassword(password) {
            if (password.length < 8) return false;
            
            const hasUpper = /[A-Z]/.test(password);
            const hasLower = /[a-z]/.test(password);
            const hasNumber = /[0-9]/.test(password);
            const hasSpecial = /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password);
            const hasOnlyAllowed = /^[A-Za-z0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+$/.test(password);
            
            if (!hasOnlyAllowed) return false;
            
            const typeCount = [hasUpper, hasLower, hasNumber, hasSpecial].filter(Boolean).length;
            return typeCount >= 3;
        }

        // ë¡œê·¸ì¸ ê´€ë ¨ í•¨ìˆ˜ë“¤
        function showLogin() {
            showScreen('loginScreen');
        }

        function showRegister() {
            showScreen('registerScreen');
        }

        function register() {
            const id = document.getElementById('regId').value;
            const password = document.getElementById('regPassword').value;
            const passwordConfirm = document.getElementById('regPasswordConfirm').value;

            if (!id) {
                showError('regError', 'ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (!validatePassword(password)) {
                showError('regError', 'ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒì´ë©°, ì˜ë¬¸ ëŒ€ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ì ì¤‘ 3ì¢… ì´ìƒì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.');
                return;
            }

            if (password !== passwordConfirm) {
                showError('regError', 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }

            const users = JSON.parse(localStorage.getItem('challengeUsers') || '{}');
            if (users[id]) {
                showError('regError', 'ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.');
                return;
            }

            users[id] = {
                password: simpleHash(password),
                scores: []
            };
            localStorage.setItem('challengeUsers', JSON.stringify(users));

            alert('íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
            showLogin();
        }

        function login() {
            const id = document.getElementById('loginId').value;
            const password = document.getElementById('loginPassword').value;

            if (!id || !password) {
                showError('loginError', 'ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const users = JSON.parse(localStorage.getItem('challengeUsers') || '{}');
            
            if (!users[id] || users[id].password !== simpleHash(password)) {
                showError('loginError', 'ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.');
                return;
            }

            currentUser = id;
            gameState.isDevMode = (id === 'DEV');
            
            startNewGame();
        }

        function logout() {
            currentUser = null;
            gameState.isDevMode = false;
            showLogin();
        }

        // ê²Œì„ ê´€ë ¨ í•¨ìˆ˜ë“¤
        function startNewGame() {
            gameState = {
                currentQuestion: 0,
                score: 0,
                wrongAnswers: 0,
                timeLeft: 600,
                timer: null,
                questions: shuffleArray([...questionBank]),
                answers: [],
                isDevMode: currentUser === 'DEV'
            };

            showScreen('gameScreen');
            
            if (gameState.isDevMode) {
                document.getElementById('devPanel').style.display = 'block';
            }

            updateHearts();
            loadQuestion();
            startTimer();
        }

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function loadQuestion() {
            if (gameState.currentQuestion >= gameState.questions.length) {
                endGame();
                return;
            }

            const question = gameState.questions[gameState.currentQuestion];
            
            document.getElementById('questionNum').textContent = gameState.currentQuestion + 1;
            document.getElementById('questionCategory').textContent = question.category;
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('currentScore').textContent = gameState.score;
            document.getElementById('answerInput').value = '';
            document.getElementById('resultBox').style.display = 'none';
            
            if (gameState.isDevMode) {
                document.getElementById('scoreInput').value = question.score;
            }
        }

        function startTimer() {
            gameState.timer = setInterval(() => {
                gameState.timeLeft--;
                updateTimerDisplay();
                
                if (gameState.timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(gameState.timeLeft / 60);
            const seconds = gameState.timeLeft % 60;
            document.getElementById('timer').textContent = 
                `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        function updateHearts() {
            const hearts = document.querySelectorAll('.heart');
            hearts.forEach((heart, index) => {
                if (index < gameState.wrongAnswers) {
                    heart.classList.add('lost');
                } else {
                    heart.classList.remove('lost');
                }
            });
        }

        function submitAnswer() {
            const userAnswer = parseInt(document.getElementById('answerInput').value);
            const currentQuestion = gameState.questions[gameState.currentQuestion];
            const isCorrect = userAnswer === currentQuestion.answer;
            
            gameState.answers.push({
                question: currentQuestion,
                userAnswer: userAnswer,
                correct: isCorrect
            });

            const resultBox = document.getElementById('resultBox');
            resultBox.style.display = 'block';
            
            if (isCorrect) {
                gameState.score += currentQuestion.score;
                resultBox.className = 'result-box result-correct';
                resultBox.innerHTML = `
                    <div>ì •ë‹µì…ë‹ˆë‹¤! +${currentQuestion.score}ì </div>
                    <div style="margin-top: 10px; font-size: 0.9em;">${currentQuestion.explanation}</div>
                `;
            } else {
                gameState.wrongAnswers++;
                resultBox.className = 'result-box result-wrong';
                resultBox.innerHTML = `
                    <div>í‹€ë ¸ìŠµë‹ˆë‹¤. ì •ë‹µ: ${currentQuestion.answer}</div>
                    <div style="margin-top: 10px; font-size: 0.9em;">${currentQuestion.explanation}</div>
                `;
                updateHearts();
                
                if (gameState.wrongAnswers >= 3) {
                    setTimeout(() => {
                        endGame();
                    }, 3000);
                    return;
                }
            }

            document.getElementById('currentScore').textContent = gameState.score;
            
            setTimeout(() => {
                gameState.currentQuestion++;
                loadQuestion();
            }, 3000);
        }

        function endGame() {
            clearInterval(gameState.timer);
            
            // ì ìˆ˜ ì €ì¥
            const users = JSON.parse(localStorage.getItem('challengeUsers') || '{}');
            if (users[currentUser]) {
                users[currentUser].scores.push({
                    score: gameState.score,
                    date: new Date().toISOString(),
                    questionsAnswered: gameState.currentQuestion
                });
                localStorage.setItem('challengeUsers', JSON.stringify(users));
            }

            showResults();
        }

        function showResults() {
            document.getElementById('finalScore').textContent = gameState.score;
            
            let resultMessage = '';
            if (gameState.wrongAnswers >= 3) {
                resultMessage = '3ë²ˆ í‹€ë ¤ì„œ ê²Œì„ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.';
            } else if (gameState.timeLeft <= 0) {
                resultMessage = 'ì‹œê°„ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.';
            } else {
                resultMessage = 'ëª¨ë“  ë¬¸ì œë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!';
            }
            document.getElementById('gameResult').textContent = resultMessage;

            // í•´ì„¤ í‘œì‹œ
            const explanationsDiv = document.getElementById('explanations');
            explanationsDiv.innerHTML = '';
            
            gameState.answers.forEach((answer, index) => {
                const explanationDiv = document.createElement('div');
                explanationDiv.className = 'explanation-section';
                explanationDiv.innerHTML = `
                    <div class="explanation-question">
                        ë¬¸ì œ ${index + 1}: ${answer.question.question}
                    </div>
                    <div class="explanation-answer">
                        <strong>ì •ë‹µ:</strong> ${answer.question.answer}<br>
                        <strong>ë‹¹ì‹ ì˜ ë‹µ:</strong> ${answer.userAnswer} ${answer.correct ? 'âœ“' : 'âœ—'}<br>
                        <strong>í•´ì„¤:</strong> ${answer.question.explanation}
                    </div>
                `;
                explanationsDiv.appendChild(explanationDiv);
            });

            showScreen('resultsScreen');
        }

        // ê°œë°œì ëª¨ë“œ í•¨ìˆ˜ë“¤
        function updateScore() {
            const newScore = parseInt(document.getElementById('scoreInput').value);
            gameState.questions[gameState.currentQuestion].score = newScore;
            alert(`í˜„ì¬ ë¬¸ì œì˜ ì ìˆ˜ê°€ ${newScore}ì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`);
        }

        function skipQuestion() {
            gameState.currentQuestion++;
            loadQuestion();
        }

        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                const activeScreen = document.querySelector('.screen.active');
                if (activeScreen.id === 'gameScreen') {
                    submitAnswer();
                } else if (activeScreen.id === 'loginScreen') {
                    login();
                } else if (activeScreen.id === 'registerScreen') {
                    register();
                }
            }
        });

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            showLogin();
        });
    </script>
</body>
</html>
